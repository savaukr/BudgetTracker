(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(24),r=n.n(s);n(32),n(33);function i(){}var l=Object(c.createContext)({token:null,userId:null,userName:null,login:i,logout:i,isAuthenticated:!1}),o=n(3),u=n(27),d=n(5),j=n.n(d),b=n(10),O=n(4),h=function(){var e=Object(c.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(O.a)(s,2),i=r[0],l=r[1];return{loading:n,request:Object(c.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,s,r,i,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",c=o.length>2&&void 0!==o[2]?o[2]:null,s=o.length>3&&void 0!==o[3]?o[3]:{},a(!0),e.prev=4,c&&(c=JSON.stringify(c),s["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:c,headers:s});case 8:return r=e.sent,e.next=11,r.json();case 11:if(i=e.sent,r.ok){e.next=14;break}throw new Error(i.message||"\u0414\u0430\u043d\u0456 \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0456 ");case 14:return a(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),a(!1),l(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(c.useCallback)((function(){return l(null)}),[])}},p=(n(35),n(2)),m=function(){var e=Object(c.useContext)(l);return Object(p.jsxs)("header",{className:"header-wrap",children:[Object(p.jsx)("h6",{className:"logo",children:"ElifTech"}),Object(p.jsx)("h5",{children:"Budjet Tracker"}),Object(p.jsxs)("div",{className:"userName",children:[Object(p.jsxs)("div",{children:["\u0412\u0438 \u0443\u0432\u0456\u0439\u0448\u043b\u0438, \u044f\u043a ",Object(p.jsx)("b",{children:e.userName?e.userName:"unknow user"})]}),Object(p.jsx)("button",{className:"btn waves-effect waves-light",onClick:function(){e.logout()},children:"\u0412\u0438\u0439\u0442\u0438"})]})]})},v=(n(37),function(){return Object(p.jsx)("footer",{children:Object(p.jsx)("div",{className:"footer_text",children:"Copyrights \xa9 2021."})})}),x=n(12),f=n(7),g=function(){return Object(c.useCallback)((function(e){e&&window.M.toast({html:e})}),[])},N=(n(38),function(e){var t=e.addSpending,n=e.valueDate,a=Object(c.useState)({amount:"",category:""}),s=Object(O.a)(a,2),r=s[0],i=s[1],o=Object(c.useContext)(l),u=h(),d=u.loading,m=u.request,v=g(),N=function(e){i(Object(f.a)(Object(f.a)({},r),{},Object(x.a)({},e.target.name,e.target.value)))},w="".concat(n.getFullYear(),"-").concat(n.getMonth(),"-").concat(n.getDate()),k=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/api/spending/create","POST",Object(f.a)(Object(f.a)({},r),{},{date:w,userId:o.userId}),{Authorization:"Bearer ".concat(o.token)});case 3:n=e.sent,t(n.newSpending),v(n.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){window.M.updateTextFields()}),[]),Object(p.jsxs)("div",{className:"createSpending",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0443\u043c\u0443",id:"amount",className:"validate",type:"number",name:"amount",onChange:N}),Object(p.jsx)("label",{htmlFor:"amount",children:"\u0421\u0443\u043c\u0430 \u0432\u0438\u0442\u0440\u0430\u0442\u0438"})]})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e",id:"category",className:"validate",type:"text",name:"category",onChange:N}),Object(p.jsx)("label",{htmlFor:"category",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0432\u0438\u0442\u0440\u0430\u0442\u0438"})]})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("button",{className:"btn waves-effect waves-light",type:"submit",name:"addSpending",onClick:k,disabled:d,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0438\u0442\u0440\u0430\u0442\u0443"})})]})}),w=(n(39),n(40),n(41),function(e){var t=e.active,n=e.setActive,c=e.setAnswer,a=e.title,s=e.children;return Object(p.jsx)("div",{className:t?"modal__overlay active":"modal__overlay",onClick:function(){return n(!1)},children:Object(p.jsxs)("div",{className:t?"modal__content active":"modal__content",onClick:function(e){return e.stopPropagation()},children:[Object(p.jsx)("div",{className:"modal__close",onClick:function(){return n(!1)},children:"\xd7"}),Object(p.jsx)("div",{className:"modal__title",children:Object(p.jsx)("h5",{children:a})}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{className:"modal__body",children:s}),Object(p.jsx)("button",{className:"btn waves-effect waves-light",onClick:function(){n(!1)},children:"\u041d\u0456"}),Object(p.jsx)("button",{className:"btn waves-effect waves-light #03a9f4 light-blue",onClick:function(){c(!0),n(!1)},children:"\u0422\u0430\u043a"})]})})}),k=function(e){var t=e.spending,n=e.deleteSpending,a=e.updateSpending,s=Object(c.useState)(!1),r=Object(O.a)(s,2),i=r[0],o=r[1],u=Object(c.useState)(!1),d=Object(O.a)(u,2),m=d[0],v=d[1],N=Object(c.useState)(!1),k=Object(O.a)(N,2),S=k[0],y=k[1],C=Object(c.useState)(!1),E=Object(O.a)(C,2),_=E[0],F=E[1],I=Object(c.useState)({category:t.category,amount:t.amount}),M=Object(O.a)(I,2),T=M[0],A=M[1],D=Object(c.useContext)(l),P=D.token,B=D.userId,q=h().request,J=g(),z=t.id;Object(c.useEffect)((function(){window.M.updateTextFields()}),[]);var L=Object(c.useCallback)(Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("/api/spending/delete/".concat(z),"DELETE",null,{Authorization:"Bearer ".concat(P)});case 3:t=e.sent,n(t.id),J("\u0412\u0438\u0442\u0440\u0430\u0442\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0430"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[P,z,q]),Y=Object(c.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("/api/spending/update/".concat(z),"PUT",Object(f.a)(Object(f.a)({},t),{},{userId:B}),{Authorization:"Bearer ".concat(P)});case 3:n=e.sent,a(n.id,n.category,n.amount),J("\u0412\u0438\u0442\u0440\u0430\u0442\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u043c\u0456\u043d\u0435\u043d\u0430"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[P,z,q]);Object(c.useEffect)((function(){S&&(Y(Object(f.a)({},T)),y(!1))}),[S]),Object(c.useEffect)((function(){_&&(L(),F(!1))}),[_]);var G=function(e){A(Object(f.a)(Object(f.a)({},T),{},Object(x.a)({},e.target.name,e.target.value)))};return Object(p.jsxs)("div",{className:"spending-wrap",children:[Object(p.jsx)("div",{className:"spending category",children:t.category}),Object(p.jsxs)("div",{className:"spending",children:[t.amount," \u0433\u0440\u043d."]}),Object(p.jsx)("div",{className:"spending changeSpend",onClick:function(){return o(!0)},children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"}),Object(p.jsx)("div",{className:"spending deleteSpend",onClick:function(){return v(!0)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(p.jsxs)(w,{title:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c  \u0437\u043c\u0456\u043d\u0438",active:i,setActive:o,answer:S,setAnswer:y,children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0443\u043c\u0443",id:"amountModal".concat(t.id),name:"amount",type:"number",className:"validate",value:T.amount,onChange:G}),Object(p.jsx)("label",{htmlFor:"amountModal".concat(t.id),children:"\u0421\u0443\u043c\u0430 \u0432\u0438\u0442\u0440\u0430\u0442\u0438"})]})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e",id:"categoryModal".concat(t.id),type:"text",name:"category",className:"validate",value:T.category,onChange:G}),Object(p.jsx)("label",{htmlFor:"categoryModal".concat(t.id),children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0432\u0438\u0442\u0440\u0430\u0442\u0438"})]})}),Object(p.jsx)("h6",{children:"\u0412\u0438 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0443\u0454\u0442\u0435 \u0437\u043c\u0456\u043d\u0438?"})]}),Object(p.jsx)(w,{title:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438?",active:m,setActive:v,answer:_,setAnswer:F})]})},S=function(e){var t=e.listSpendings,n=e.deleteSpending,c=e.updateSpending,a=e.strDate;if(!t.length)return Object(p.jsxs)("h5",{className:"center",children:["\u0416\u043e\u0434\u043d\u043e\u0457 \u0432\u0438\u0442\u0440\u0430\u0442\u0438 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430 ",a]});var s=t.reduce((function(e,t){return e+ +t.amount}),0);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h5",{children:["\u0412\u0438\u0442\u0440\u0430\u0442\u0438 \u0437\u0430 ",a]}),t.map((function(e){return Object(p.jsx)(k,{spending:e,deleteSpending:n,updateSpending:c},e.id)})),Object(p.jsxs)("h5",{children:["\u0417\u0430\u0433\u0430\u043b\u043e\u043c: ",s," \u0433\u0440\u043d."]})]})},y=(n(42),function(){return Object(p.jsx)("div",{className:"loader-flex",children:Object(p.jsx)("div",{className:"preloader-wrapper big active",children:Object(p.jsxs)("div",{className:"spinner-layer spinner-blue-only",children:[Object(p.jsx)("div",{className:"circle-clipper left",children:Object(p.jsx)("div",{className:"circle"})}),Object(p.jsx)("div",{className:"gap-patch",children:Object(p.jsx)("div",{className:"circle"})}),Object(p.jsx)("div",{className:"circle-clipper right",children:Object(p.jsx)("div",{className:"circle"})})]})})})}),C=n(26),E=(n(43),function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(new Date),r=Object(O.a)(s,2),i=r[0],o=r[1],d=h(),x=d.request,f=d.loading,g=Object(c.useContext)(l).token,w=Object(c.useCallback)(Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(i.getFullYear(),"-").concat(i.getMonth()<10?"0"+i.getMonth():i.getMonth(),"-").concat(i.getDate()),e.next=4,x("/api/spending/date/".concat(t),"GET",null,{Authorization:"Bearer ".concat(g)});case 4:(n=e.sent)&&a(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[g,x,i]);Object(c.useEffect)((function(){w()}),[w]);var k="".concat(i.getDate(),"-").concat(i.getMonth()+1<10?"0"+(+i.getMonth()+1):+i.getMonth()+1,"-").concat(i.getFullYear());return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m,{}),Object(p.jsxs)("main",{children:[Object(p.jsxs)("div",{className:"main__content",children:[Object(p.jsx)("div",{className:"calendar-wrap",children:Object(p.jsx)(C.a,{onChange:o,value:i})}),Object(p.jsx)(N,{addSpending:function(e){a((function(t){return[].concat(Object(u.a)(t),[e])}))},valueDate:i})]}),Object(p.jsx)("div",{className:"main__content",children:f?Object(p.jsx)(y,{}):Object(p.jsx)(S,{listSpendings:n||[],deleteSpending:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))},updateSpending:function(e,t,n){a((function(c){return c.map((function(c){return c.id===e&&(c.amount=n,c.category=t),c}))}))},strDate:k})})]}),Object(p.jsx)(v,{})]})}),_=(n(46),function(){var e=Object(c.useContext)(l),t=g(),n=h(),a=n.loading,s=n.error,r=n.request,i=n.clearError,o=Object(c.useState)({name:"",email:"",password:""}),u=Object(O.a)(o,2),d=u[0],m=u[1];Object(c.useEffect)((function(){t(s),i()}),[s,t,i]),Object(c.useEffect)((function(){window.M.updateTextFields()}),[]);var v=function(e){m(Object(f.a)(Object(f.a)({},d),{},Object(x.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("/api/auth/register","POST",Object(f.a)({},d));case 3:n=e.sent,t(n.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r("/api/auth/login","POST",Object(f.a)({},d));case 3:n=t.sent,e.login(n.token,n.userId,n.userName),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col s6 offset-s3",children:[Object(p.jsx)("h3",{className:"center-align",children:"\u0412\u0456\u0439\u0434\u0456\u0442\u044c \u0430\u0431\u043e \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0439\u0442\u0435\u0441\u044c"}),Object(p.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(p.jsxs)("div",{className:"card-content white-text",children:[Object(p.jsx)("span",{className:"card-title",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0457 \u0434\u0430\u043d\u043d\u0456:"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c'\u044f",id:"name",type:"text",name:"name",value:d.name,onChange:v}),Object(p.jsx)("label",{htmlFor:"name",children:"\u0406\u043c'\u044f:"})]}),Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c email",id:"email",type:"text",name:"email",value:d.email,onChange:v}),Object(p.jsx)("label",{htmlFor:"email",children:"Email:"})]}),Object(p.jsxs)("div",{className:"input-field",children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",value:d.password,onChange:v}),Object(p.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"})]})]})]}),Object(p.jsxs)("div",{className:"card-action",children:[Object(p.jsx)("div",{className:"button-wrap",children:Object(p.jsx)("button",{className:"btn-mrg btn waves-effect waves-light",name:"sigin",onClick:w,disabled:a,children:"\u0412\u0432\u0456\u0439\u0442\u0438"})}),Object(p.jsx)("div",{className:"button-wrap",children:Object(p.jsx)("button",{className:"btn-mrg btn waves-effect waves-light",name:"auther",onClick:N,disabled:a,children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"})})]})]})]})})}),F=n(18),I="userData";var M=function(){var e=function(){var e=Object(c.useState)(null),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(O.a)(s,2),i=r[0],l=r[1],o=Object(c.useState)(null),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(!1),h=Object(O.a)(b,2),p=h[0],m=h[1],v=Object(c.useCallback)((function(e,t,n){a(e),l(t),j(n),localStorage.setItem(I,JSON.stringify({userId:t,token:e,userName:n}))}),[]),x=Object(c.useCallback)((function(){a(null),l(null),j(null),localStorage.removeItem(I)}));return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem(I));e&&e.token&&v(e.token,e.userId,e.userName),m(!0)}),[v]),{login:v,logout:x,token:n,userId:i,userName:d,ready:p}}(),t=e.token,n=e.userId,a=e.userName,s=e.login,r=e.logout,i=!!t,u=function(e){return e?Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/spending",exact:!0,children:Object(p.jsx)(E,{})}),Object(p.jsx)(o.a,{to:"/spending"})]}):Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/",exact:!0,children:Object(p.jsx)(_,{})}),Object(p.jsx)(o.a,{to:"/"})]})}(i);return Object(p.jsx)(l.Provider,{value:{token:t,userId:n,userName:a,login:s,logout:r,isAuthenticated:i},children:Object(p.jsx)(F.a,{children:Object(p.jsx)("div",{className:"container",children:u})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),T()}},[[49,1,2]]]);
//# sourceMappingURL=main.0519f605.chunk.js.map